javascript:(()=>{if(window.__quillAutoHooked){console.log('[Quill Auto] Already hooked.');return;}window.__quillAutoHooked=true;console.log('[Quill Auto] Hooking fetch...');const keyword="That's a strong sentence!";const escapeReg=str=>str.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');const forceSetInputValue=(input,value)=>{if(input instanceof HTMLInputElement||input instanceof HTMLTextAreaElement){const setter=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(input),'value').set;setter.call(input,value);input.dispatchEvent(new Event('input',{bubbles:true}));input.dispatchEvent(new Event('change',{bubbles:true}));}else if(input.isContentEditable){input.focus();document.execCommand('selectAll');document.execCommand('delete');document.execCommand('insertText',false,value);}};const origFetch=window.fetch;window.fetch=async function(...args){const response=await origFetch(...args);try{const url=args[0];if(typeof url==='string'&&url.includes('/responses')){const clone=response.clone();try{const json=await clone.json();const item=json.find(i=>i?.feedback?.includes(keyword)&&i?.text);if(!item){console.warn('[Quill Auto] No matching feedback.');return response;}const fullAnswer=item.text;console.log('[Quill Auto] Matched:',fullAnswer);const fillNow=()=>{const contentDiv=document.querySelector('.connect-text-area[contenteditable="true"]');if(contentDiv)forceSetInputValue(contentDiv,fullAnswer);const inputs=document.querySelectorAll('input.fill-in-blank-input');if(inputs.length>0){let fragments=[];inputs.forEach(input=>{const before=input.previousSibling?.textContent?.trim()||'';const after=input.nextSibling?.textContent?.trim()||'';fragments.push({input,before,after});});for(const{input,before,after}of fragments){const regex=new RegExp(`${escapeReg(before)}\\s+(\\S+?)\\s+${escapeReg(after)}`,'i');const match=fullAnswer.match(regex);if(match&&match[1]){forceSetInputValue(input,match[1]);console.log(`[Quill Auto] Filled blank: "${match[1]}"`);}}}};setTimeout(fillNow,200);}catch(jsonErr){console.warn('[Quill Auto] Failed to parse JSON:',jsonErr);}}}catch(e){console.warn('[Quill Auto] Unexpected error:',e);}return response;};})();
